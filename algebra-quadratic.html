<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>SageMath | Δευτεροβάθμια Εξίσωση</title>
  <link rel="stylesheet" href="style.css">
  <!-- Sage Cell script -->
  <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
  <script>
    sagecell.makeSagecell({
      inputLocation: ".sagecell",
      evalButtonText: "Υπολογισμός"
    });
  </script>
</head>
<body>
  <!-- Banner -->
  <div id="banner-placeholder"></div>
  
  <!-- Μενού -->
  <div id="menu-placeholder"></div>

  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar-placeholder"></aside>

    <!-- Περιεχόμενο -->
    <main>
      <h1>Λύση Δευτεροβάθμιας Εξίσωσης</h1>
      <p>
        Στο παράδειγμα αυτό μπορούμε να λύσουμε μια γενική δευτεροβάθμια εξίσωση 
        με παραμέτρους <em>a</em>, <em>b</em>, <em>c</em>. 
        Χρησιμοποιούμε το <strong>@interact</strong> του SageMath για 
        να δίνουμε τιμές και να βλέπουμε τα αποτελέσματα και το γράφημα.
      </p>

      <div class="sagecell">
        <script type="text/x-sage">
          @interact
          def solve_quadratic(
              a_str=input_box('1', label='a', type=str),
              b_str=input_box('1', label='b', type=str),
              c_str=input_box('1', label='c', type=str)
          ):
              try:
                  a = SR(a_str)
                  b = SR(b_str)
                  c = SR(c_str)
                  var('x')

                  if not all(-10 <= val.n() <= 10 for val in [a, b, c]):
                      pretty_print(html("<span style='color:red'>Οι τιμές πρέπει να είναι μεταξύ -10 και 10.</span>"))
                      return

                  eq = a*x^2 + b*x + c == 0
                  Delta = b^2 - 4*a*c
                  Delta_val = Delta.n()

                  show(LatexExpr(r"\text{Λύνουμε: } %s = 0" % latex(eq)))
                  show(LatexExpr(r"\Delta = %s" % latex(Delta)))

                  plot1 = plot(a*x^2 + b*x + c, (x, -10, 10), ymin=-10, ymax=10, color='blue')

                  if Delta_val >= 0:
                      r1 = (-b + sqrt(Delta)) / (2*a)
                      r2 = (-b - sqrt(Delta)) / (2*a)
                      roots = [r1, r2] if Delta_val > 0 else [r1]

                      for r in roots:
                          plot1 += point((r.n(), 0), size=30, color='green')

            show(roots)
        else:
            show(LatexExpr(r"\text{Μη πραγματικές ρίζες}"))

        plot1.show()
    except Exception:
        pretty_print(html("<span style='color:red'>Σφάλμα στην είσοδο</span>"))
        </script>
      </div>
    </main>
  </div>

  <!-- Scripts για banner, menu, sidebar -->
  <script>
    fetch("banner.html").then(r=>r.text()).then(d=>document.getElementById("banner-placeholder").innerHTML=d);
    fetch("menu.html").then(r=>r.text()).then(d=>document.getElementById("menu-placeholder").innerHTML=d);
    fetch("sidebar-algebra.html").then(r=>r.text()).then(d=>document.getElementById("sidebar-placeholder").innerHTML=d);
  </script>
</body>
</html>
